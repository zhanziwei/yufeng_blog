---
layout: post
title: lzo解析
date: 2021-04-19
Author: yufeng 
tags: [Hive]
comments: true
toc: true
---

#### Hadoop中四种压缩方式的对比

1. Gzip

   优点：压缩解压速度快，压缩率高

   缺点：不支持切片

   使用场景：文件压缩后在130M以内，都可以使用Gzip压缩

2. BZip2

   优点：压缩率高，可以切片

   缺点：压缩解压速度超级慢

   使用场景：不要求压缩速率，比如备份历史记录，备份文件

3. Lzo

   优点：压缩解压速度比较快，压缩率也可以，支持切片

   缺点：压缩率比Gzip低，hadoop本身不支持，需要自己安装，使用Lzo格式的文件时需要做一些特叔处理（为了支持切片需要建立索引，还要将InputFormat指定为Lzo格式）

4. snappy

   优点：高压缩解压速度，可用于Map-》Reduce作为中间数据的压缩格式

   缺点：不能切片，压缩率比GZip小，hadoop本身不支持。

#### Lzo切片原理

Lzo本身不具备压缩切片的功能，Hadoop在读入一个大文件的时候，会为每个文件维护一个索引文件，之后将文件按照一份一份的读入缓存，当缓存读满后，就将这一份进行lzo压缩，并在索引文件中维护相关的信息--一个缓存写完后便将写入的数据长度写到索引文件中。根据索引文件得各个长度，读取该长度得数据，交给map处理。



